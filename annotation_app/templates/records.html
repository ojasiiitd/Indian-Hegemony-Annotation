{% extends "layout/base.html" %}

{% block content %}

<h1 class="title">Collected Annotations</h1>
<p class="subtitle">
All submitted records (latest first).
</p>

{% if not records %}
  <p>No records yet.</p>
{% endif %}

{% for r in records %}
<div class="box">

  <!-- ================================================= -->
  <!-- HEADER -->
  <!-- ================================================= -->
  <div class="columns is-mobile">
    <div class="column">
      <strong>ID:</strong> {{ r.id }}<br>
      <strong>Region:</strong> {{ r.region }} â€” {{ r.state }}
    </div>
    <div class="column has-text-right">
      <small>{{ r.timestamp }}</small>
    </div>
  </div>

  <hr>

  <!-- ================================================= -->
  <!-- PROMPTS -->
  <!-- ================================================= -->
  <h3 class="has-text-weight-semibold">Prompts</h3>

  <div class="columns is-variable is-6">
    <div class="column">
      <strong>Base Prompt</strong>
      <pre class="wrapped-pre">{{ r.prompts.base }}</pre>
    </div>

    <div class="column">
      <strong>Identity-Primed Prompt</strong>
      <pre class="wrapped-pre">{{ r.prompts.identity }}</pre>
    </div>
  </div>

  <hr>

  <!-- ================================================= -->
  <!-- GEMINI OUTPUTS -->
  <!-- ================================================= -->
  <h3 class="has-text-weight-semibold">Gemini Outputs</h3>

  <div class="columns is-variable is-6">

    <!-- GEMINI BASE -->
    <div class="column">
      <strong>Base Prompt</strong>
      <pre class="wrapped-pre">{{ r.outputs.gemini.base.text }}</pre>

      <ul>
        {% for axis, data in r.outputs.gemini.base.hegemony.items() %}
          <li>
            {{ axis|capitalize }}: {{ data.present }}
          </li>
        {% endfor %}
      </ul>
    </div>

    <!-- GEMINI IDENTITY -->
    <div class="column">
      <strong>Identity-Primed Prompt</strong>
      <pre class="wrapped-pre">{{ r.outputs.gemini.identity.text }}</pre>

      <ul>
        {% for axis, data in r.outputs.gemini.identity.hegemony.items() %}
          <li>
            {{ axis|capitalize }}: {{ data.present }}
          </li>
        {% endfor %}
      </ul>
    </div>

  </div>

  <hr>

  <!-- ================================================= -->
  <!-- GPT OUTPUTS -->
  <!-- ================================================= -->
  <h3 class="has-text-weight-semibold">GPT Outputs</h3>

  <div class="columns is-variable is-6">

    <!-- GPT BASE -->
    <div class="column">
      <strong>Base Prompt</strong>
      <pre class="wrapped-pre">{{ r.outputs.gpt.base.text }}</pre>

      <ul>
        {% for axis, data in r.outputs.gpt.base.hegemony.items() %}
          <li>
            {{ axis|capitalize }}: {{ data.present }}
          </li>
        {% endfor %}
      </ul>
    </div>

    <!-- GPT IDENTITY -->
    <div class="column">
      <strong>Identity-Primed Prompt</strong>
      <pre class="wrapped-pre">{{ r.outputs.gpt.identity.text }}</pre>

      <ul>
        {% for axis, data in r.outputs.gpt.identity.hegemony.items() %}
          <li>
            {{ axis|capitalize }}: {{ data.present }}
          </li>
        {% endfor %}
      </ul>
    </div>

  </div>

  <hr>

  <!-- ================================================= -->
  <!-- LLAMA OUTPUTS -->
  <!-- ================================================= -->
  <h3 class="has-text-weight-semibold">LLama Outputs</h3>

  <div class="columns is-variable is-6">

    <!-- LLAMA BASE -->
    <div class="column">
      <strong>Base Prompt</strong>
      <pre class="wrapped-pre">{{ r.outputs.llama.base.text }}</pre>

      <ul>
        {% for axis, data in r.outputs.llama.base.hegemony.items() %}
          <li>
            {{ axis|capitalize }}: {{ data.present }}
          </li>
        {% endfor %}
      </ul>
    </div>

    <!-- LLAMA IDENTITY -->
    <div class="column">
      <strong>Identity-Primed Prompt</strong>
      <pre class="wrapped-pre">{{ r.outputs.llama.identity.text }}</pre>

      <ul>
        {% for axis, data in r.outputs.llama.identity.hegemony.items() %}
          <li>
            {{ axis|capitalize }}: {{ data.present }}
          </li>
        {% endfor %}
      </ul>
    </div>

  </div>

  <hr>

  <!-- ================================================= -->
  <!-- GROUND TRUTH -->
  <!-- ================================================= -->
  <h4 class="has-text-weight-semibold">Ground Truth</h4>
  <pre class="wrapped-pre">{{ r.ground_truth }}</pre>

  {% if r.references %}
    <h4 class="has-text-weight-semibold mt-3">References</h4>
    <pre class="wrapped-pre">{{ r.references }}</pre>
  {% endif %}

</div>
{% endfor %}

{% endblock %}